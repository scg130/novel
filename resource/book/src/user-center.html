<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="format-detection" content="telephone=no" />
    <title>用户中心</title>
    <link rel="stylesheet" href="fonts/iconfont.css" />
    <link rel="stylesheet" href="css/style.min.css" />
    <link rel="stylesheet" href="layui/dist/css/layui.css" />
    <link rel="stylesheet" href="/book/src/css/tranlate.css" />
    <script src="js/loading.js"></script>
  </head>
  <body>
    <header class="header flex flex-vc">
      <div class="l">
        <a href="/book/index.html"><i class="icon-zhuye1"></i></a>
      </div>
      <div class="c box-flex-1 text-center"><h1>个人中心</h1></div>
      <div class="r text-right">
        <a href="/book/src/user-center.html"><i class="icon-zhuye"></i></a>
      </div>
    </header>
    <!--个人中心-->

    <div class="section recharge-col mt1rem user-info-box flex">
      <div class="user-image">
        <img src="images/111.jpg" alt="" />
      </div>
      <div class="user-info box-flex-1">
        <p class="none" id="name">旋涡名人</p>
        <p class="none">
          你当前登录方式为：<span class="color-vip tag">账号</span>
        </p>
        <p class="none color-vip"><a href="#">成为vip用户</a></p>
      </div>
    </div>
    <div class="section mt1rem user-link">
      <ul class="none">
        <li class="recharge-col">
          <a href="#">
            <i class="icon icon-yuedu"></i>
            <span class="title"
              >我的读书币 <b class="color-red read-gold" id="wallet">333</b>
            </span>
            <i class="icon icon-xia pull-right"></i>
          </a>
        </li>
        <li class="recharge-col">
          <a href="recharge.html">
            <i class="icon icon-qianbao1 fz18rem"></i>
            <span class="title">充值</span>
            <i class="icon icon-xia pull-right"></i>
          </a>
        </li>
        <li class="recharge-col">
          <a href="/book/src/pay-history.html">
            <i class="icon icon-chakan fz1rem"></i>
            <span class="title">交易记录</span>
            <i class="icon icon-xia pull-right"></i>
          </a>
        </li>
        <li class="recharge-col">
          <a href="/book/src/bookshelf.html">
            <i class="icon icon-yuedu1"></i>
            <span class="title">我的书架</span>
            <i class="icon icon-xia pull-right"></i>
          </a>
        </li>
      </ul>
    </div>
    <!--底部-->
    <a
      style="margin-top:70%"
      href="javascript:;"
      onclick="logout()"
      class=" btn btn-block btn-primary"
      >退出</a
    >
  </body>
  <script src="js/jquery.min.js"></script>
  <script src="js/script.js"></script>
  <script src="layui/dist/layui.js"></script>
  <script>
    function logout() {
      $.ajax({
        url: "/logout",
        contentType: "application/json",
        dataType: "json",
        type: "GET",
        success: function (res) {
          if (res.code == 0) {
            window.location.href = "/book/src/login.html";
          }
        },
        statusCode: {
          401: function () {
            layer.msg(
              "请先登录",
              {
                time: 1000,
              },
              function () {
                window.location.href = "/book/src/login.html";
              }
            );
          },
          402: function () {
            layer.msg(
              "请先登录",
              {
                time: 1000,
              },
              function () {
                window.location.href = "/book/src/login.html";
              }
            );
          },
        },
      });
    }

    $.ajax({
      url: "/user/info",
      contentType: "application/json",
      dataType: "json",
      type: "GET",
      success: function (res) {
        console.log(res);
        if (res.code == 0) {
          //res.data.phone
          $("#name").html(res.data.phone);
          $("#wallet").html(res.data.coins);
        }
      },
      statusCode: {
        401: function () {
          layer.msg(
            "请先登录",
            {
              time: 1000,
            },
            function () {
              window.location.href = "/book/src/login.html";
            }
          );
        },
        402: function () {
          layer.msg(
            "请先登录",
            {
              time: 1000,
            },
            function () {
              window.location.href = "/book/src/login.html";
            }
          );
        },
      },
    });
  </script>
  <script src="/book/src/js/tranlate.js"></script>
</html>
